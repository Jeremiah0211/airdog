<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow
	xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:controls="flexunit.flexui.controls.*"
	layout="vertical"
	title="Innlogging"
	width="100%" 
	height="100%" xmlns:view="no.airdog.view.*">

<mx:Script>
	<![CDATA[
		import no.airdog.services.Components;
		import mx.events.CloseEvent;
		
		private function avbryt():void
		{
			Components.instance.controller.fjernLoggInnVindu();
		}
		
        private function loggInn():void 
        {
			Components.instance.controller.loggInn(brukernavn.text, passord.text);
        }
        
        public function ristVindu():void
        {
        	melding.text = "Feil brukernavn/passord";
        	rister.stop();
			rister.duration = 55;
			rister.play([this]);
        }
        
        private function gjest():void
        {
        	Components.instance.controller.loggInn("gjest", "gjest");
        }
	]]>
</mx:Script>

<mx:Sequence id="rister">
	<mx:Move xBy="-5"/>
	<mx:Move xBy="10"/>
	<mx:Move xBy="-10"/>
	<mx:Move xBy="10"/>
	<mx:Move xBy="-10"/>
	<mx:Move xBy="10"/>
	<mx:Move xBy="-10"/>
	<mx:Move xBy="5"/>
</mx:Sequence>

<mx:Move id="visLogginn" xFrom="-340" xTo="0"/>
<mx:Move id="gjemLogginn" xFrom="0" xTo="-340"/>
<mx:Move id="visKlubb" xFrom="340" xTo="0" />
<mx:Move id="gjemKlubb" xFrom="0" xTo="340" />



<mx:HBox width="100%">
	<mx:Image id="Logo" source="no/airdog/view/assets/airdoglogo200clean.png" width="200" height="200"/>

	<mx:ViewStack id="stack" selectedIndex="{Components.instance.session.bruker.innlogget ? 1 : 0}" width="350" height="100%">
		<mx:VBox showEffect="visLogginn" hideEffect="gjemLogginn">
			<mx:Text id="melding" text="" textAlign="center" color="red" paddingBottom="0" height="20" width="100%" fontWeight="bold"/>
			<mx:Form id="logginnform" defaultButton="{loggInnKnapp}" paddingTop="0">
				<mx:Text text="Skriv inn brukernavn og passord."/>
				<mx:Text text="Trykk s책 p책 'Logg inn'-knappen for 책 f책 tilgang."/>
				<mx:FormItem label="Brukernavn">
					<mx:TextInput id="brukernavn" width="210" toolTip="Skriv inn brukernavnet ditt her"/>
				</mx:FormItem>
				
				<mx:FormItem label="Passord">
					<mx:TextInput id="passord" width="210" toolTip="Skriv inn passordet ditt her" displayAsPassword="true"/>
				</mx:FormItem>
			
				<mx:FormItem horizontalAlign="right" width="100%">
					<mx:HBox>
						<mx:Button id="gjestKnapp" label="Gjest" click="gjest()" icon="@Embed(source='assets/ikoner/user_silhouette.png')"/>
						<mx:Button id="loggInnKnapp" label="Logg inn" click="loggInn()" icon="@Embed(source='assets/ikoner/key__plus.png')"/>
					</mx:HBox>
				</mx:FormItem>
			</mx:Form>
		</mx:VBox>
		<view:KlubbVindu showEffect="visKlubb" hideEffect="gjemKlubb"/>
	</mx:ViewStack>
</mx:HBox>

</mx:TitleWindow>
