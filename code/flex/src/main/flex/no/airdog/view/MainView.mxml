<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml" 
	xmlns:services="no.airdog.services.*"
    xmlns:view="no.airdog.view.*"
	xmlns:adminView="no.airdog.view.admin.*"
    creationComplete="showInitialView(event)" styleName="MainView"
    width="100%" height="100%" minWidth="800" minHeight="500">
	<mx:Script>
        <![CDATA[
        	import mx.controls.Alert;
        	import no.airdog.model.Session;
        	import no.airdog.controller.Navigasjon;
            import no.airdog.services.Components;
            import no.airdog.view.InnloggingVindu;
            import mx.managers.PopUpManager;
            import mx.events.ItemClickEvent;
        	import mx.controls.tabBarClasses.Tab;
        	import mx.core.UIComponent;
        	
            public function sok():void
			{
				visHundeliste();
				Components.instance.controller.sokHund(sokefelt.text);
			}
			
			private function visHjem():void
			{
				Navigasjon.visHjem();
			}
            
            private function showInitialView(e:Event):void
            {
            	innloggingSprettOppVindu();
            	Components.instance.historie.settPunkt();
            }
            
            private function visLastOpp():void
            {
            	Navigasjon.visLastOpp();
            }
            
            public function visHundeliste():void
            {
            	tabs.selectedChild = hundertab;
            	Navigasjon.visHundeliste();
            }
            
            public function visHundNr(nr:int):void
            {
            	Navigasjon.visHundNr(nr);
            }
            
            public function visAdminRoller():void
            {
            	Navigasjon.visAdminRoller();
            }
            
            public function visACL():void
            {
            	Navigasjon.visACL();
            }
            
            public function visArsgjennomsnitt():void
            {
            	Navigasjon.visArsgjennomsnitt();
            }
            
            private function innloggingSprettOppVindu():void
            {
            	Components.instance.controller.loggUt();
            	tabs.selectedIndex = 1;
            	Components.instance.controller.visLoggInnVindu(this);
            }
            
            private function leggInnJaktprove():void
            {
            	Components.instance.controller.visLeggInnJaktproveVindu(UIComponent(this.parentApplication));
            }
            
            public function visStorHundeliste():void
			{
				Navigasjon.visStorHundeliste();
			}
			
			public function visLitenHundeliste():void
			{
				Navigasjon.visLitenHundeliste();
			}
        ]]>
    </mx:Script>
	
<mx:VBox styleName="MainViewContainer" width="100%" height="100%">    	
	<mx:VBox id="topbar" styleName="TopBar" width="100%">
		<mx:HBox verticalAlign="middle" width="100%">
			<mx:Image source="no/airdog/view/assets/airdoglogo2.png" click="visHjem()"/>
			<mx:HBox>
				<mx:TextInput id="sokefelt" text="" enter="sok()" cornerRadius="5"/>
				<mx:LinkButton label="Søk" icon="@Embed(source='assets/ikoner/magnifier.png')" click="sok()" color="#22201E" fontSize="13"/>
				<mx:LinkButton label="Hjem" icon="@Embed(source='assets/ikoner/home.png')" click="visHjem()" color="#22201E" fontSize="13"/>	
			</mx:HBox>			
			<mx:HBox width="100%" horizontalAlign="right" verticalAlign="middle" paddingRight="5">				
				<mx:Text text="Logget inn som {Components.instance.session.bruker.epost} i {Components.instance.session.bruker.sattKlubb}" fontSize="12"/>
				<mx:LinkButton label="Logg ut" click="innloggingSprettOppVindu()" icon="@Embed(source='assets/ikoner/key__minus.png')" fontSize="13" color="#22201E"/>
			</mx:HBox>
		</mx:HBox>										
		<mx:TabNavigator id="tabs" width="100%" styleName="tabNavigator">
			<mx:HBox id="admintab" label="Admin">
				<mx:LinkButton label="Brukere" styleName="UnderMeny" icon="@Embed(source='assets/ikoner/users.png')"/>
				<mx:LinkButton label="Roller" click="visAdminRoller()" styleName="UnderMeny" icon="@Embed(source='assets/ikoner/users__pencil.png')"/>
		 		<mx:LinkButton label="Last opp .DAT" click="visLastOpp()" styleName="UnderMeny" icon="@Embed(source='assets/ikoner/envelope__plus.png')"/>
		 		<mx:LinkButton label="Legg inn jaktprøve" click="leggInnJaktprove()" styleName="UnderMeny" icon="@Embed(source='assets/ikoner/report__plus.png')"/>
		 	</mx:HBox>
	   		<mx:HBox id="hundertab" label="Hunder">
	   			<mx:LinkButton label="Søkeresultat" click="visHundeliste()" styleName="UnderMeny" icon="@Embed(source='assets/ikoner/dog_many.png')"/>
	   			<mx:LinkButton label="Vis hund nr 0" click="visHundNr(0)" styleName="UnderMeny" icon="@Embed(source='assets/ikoner/dog.png')"/>
				<mx:LinkButton label="Favoritthunder (4)" styleName="UnderMeny" click="visHundeliste()" icon="@Embed(source='assets/ikoner/folder_horizontal.png')"/>
				<mx:LinkButton label="Liste med bilde" visible="{Components.instance.session.hovedNavigasjon.nr == 1 ? true : false}" styleName="UnderMeny" click="visStorHundeliste()" icon="@Embed(source='assets/ikoner/toggle.png')"/>
				<mx:LinkButton label="Liste uten bilde" visible="{Components.instance.session.hovedNavigasjon.nr == 1 ? true : false}" styleName="UnderMeny" click="visLitenHundeliste()" icon="@Embed(source='assets/ikoner/toggle_collapse.png')"/>
	   		</mx:HBox>
	  		<mx:HBox id="divtab" label="Diverse">
	  			<mx:LinkButton label="Div1" icon="@Embed(source='assets/ikoner/key__minus.png')" styleName="UnderMeny"/>
	  			<mx:LinkButton label="Årsgjennomsnitt" styleName="UnderMeny" click="visArsgjennomsnitt()"/>
	  			<mx:LinkButton label="Div3" styleName="UnderMeny"/>
	  			<mx:LinkButton label="Div4" styleName="UnderMeny"/>
	  			<mx:LinkButton label="Div5" styleName="UnderMeny"/>
	  		</mx:HBox>
	  		<mx:HBox id="devtab" label="Development">
	  			<mx:LinkButton label="ACL" styleName="UnderMeny" click="visACL()" icon="@Embed(source='assets/ikoner/key.png')"/>
	  		</mx:HBox>
		</mx:TabNavigator>	  
	</mx:VBox>
	<mx:ViewStack width="100%" height="100%" selectedIndex="{Components.instance.session.hovedNavigasjon.nr}">
	    <adminView:DatOpplastning/>
	    <view:HundeSok/>
	    <view:HundeProfil/>
	    <adminView:RolleRettighet/>
	    <adminView:Dev_ACL/>
	    <view:Arsgjennomsnitt/>
	    <view:Hjem/>
    </mx:ViewStack>
</mx:VBox>
</mx:VBox>