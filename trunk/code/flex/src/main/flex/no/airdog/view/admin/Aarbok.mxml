<?xml version="1.0" encoding="utf-8"?>
<mx:HBox 
	xmlns:mx="http://www.adobe.com/2006/mxml" 
	xmlns:view="no.airdog.view.*">
    <mx:Script>
        <![CDATA[
        	import no.airdog.view.HundeProfil;
        	import no.airdog.model.Hund;
        	import mx.controls.Alert;
        	import no.airdog.model.Valg;
        	import mx.collections.ArrayCollection;
        	import no.airdog.model.OpplastningObjekt;
        	import no.airdog.model.Opplastning;
			import no.airdog.services.Components;
			import no.airdog.controller.*;
					
			private function lagAarbok():void
			{
				if (Components.instance.session.aarbokHund != null)
				{	
					if (h.selected == true) Verktoy.lagAarbok(Components.instance.session.aarbokHund.hundId, aar.value.toString(), h.id);
					if (t.selected == true) Verktoy.lagAarbok(Components.instance.session.aarbokHund.hundId, aar.value.toString(), t.id);
					if (alle.selected == true) Verktoy.lagAarbok(Components.instance.session.aarbokHund.hundId, aar.value.toString(), alle.id);
				}
				else
				{
					if (h.selected == true) Verktoy.lagAarbok(null, aar.value.toString(), h.id);
					if (t.selected == true) Verktoy.lagAarbok(null, aar.value.toString(), t.id);
					if (alle.selected == true) Verktoy.lagAarbok(null, aar.value.toString(), alle.id);
				}
			} 	          
            
            private function riktigHoyde(felt:TextArea) :void
			{
				felt.validateNow();
				felt.mx_internal::getTextField().autoSize = TextFieldAutoSize.LEFT;
				felt.height = felt.mx_internal::getTextField().height;
			}
        ]]>
    </mx:Script>
    <mx:Panel title="Lag årbok" height="100%">
    	<mx:Text visible="{Components.instance.session.aarbokHund != null ? true : false }"
    		includeInLayout="{Components.instance.session.aarbokHund != null ? true : false }"
    		text="{'Du lager nå årbok for ' + Components.instance.session.aarbokHund.navn}" />
    	
    	<mx:Form width="100%" styleName="nopaddingorborder">
	    	<mx:FormItem label="År">
	    		<mx:NumericStepper id="aar" value="2008" maxChars="4" maximum="3000"/>
	    	</mx:FormItem>
	    	<mx:FormItem label="Kjønn"
	    		visible="{Components.instance.session.aarbokHund == null ? true : false }"
    			includeInLayout="{Components.instance.session.aarbokHund == null ? true : false }">
	    		<mx:RadioButton groupName="kjonn" id="alle" label="Alle" selected="true" />
			    <mx:RadioButton groupName="kjonn" id="h" label="Hann" /> 
			    <mx:RadioButton groupName="kjonn" id="t" label="Tispe" />
	    	</mx:FormItem>
	    	<mx:VBox horizontalAlign="center" width="100%">
				<mx:ProgressBar indeterminate="true" id="venterPHP" width="100%" label="Lager årbok..." labelPlacement="center" visible="false" />
	   		</mx:VBox>
	    	<mx:FormItem width="100%" horizontalAlign="right">
	    		<mx:Button label="Lag årbok" click="lagAarbok()" icon="@Embed(source='/no/airdog/view/assets/ikoner/arrow_skip_090.png')"/>
	    	</mx:FormItem>
    	</mx:Form>
    	<mx:Spacer height="100%"/>
   		<mx:VBox styleName="notis" width="100%">
	   		<mx:HBox verticalAlign="middle">
	   			<mx:Image source="@Embed(source='/no/airdog/view/assets/ikoner/information.png')"/>
	   			<mx:Label text="Informasjon" fontWeight="bold"/>
	   		</mx:HBox>
			<mx:TextArea id="tekstboks" backgroundAlpha="0" borderThickness="0" editable="false" width="100%" creationComplete="riktigHoyde(this.tekstboks)"
				text="Gjør dine valg og klikk på 'Lag årbok'-knappen."/>
	    </mx:VBox>
	    <mx:Spacer height="100%"/>
    </mx:Panel>
	
    <mx:Panel title="Resultat" height="100%" width="100%">
	    <mx:TextArea id="pText" width="100%" height="100%" text="Kommer tekst fra php..." editable="false"/>
    </mx:Panel>
</mx:HBox>